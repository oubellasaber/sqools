<div class="content" style="transform: none;">
    <div class="row">

        <!-- Page Header -->
        <div class="col-md-12">
            <div class="d-md-flex d-block align-items-center justify-content-between mb-3">
                <div class="my-auto mb-2">
                    <h3 class="page-title mb-1">Student Details</h3>
                    <nav>
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item">
                                <a href="index.html">Dashboard</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="students.html">Student</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">Student Details</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        <!-- /Page Header -->

    </div>

    <div class="row" style="transform: none;">

        <!-- Student Information -->
        <div class="col-xxl-3 col-xl-4 theiaStickySidebar student-link" data-id="<%= studentInfo.id %>" style="position: relative; overflow: visible; box-sizing: border-box; min-height: 1px;">

            <div class="theiaStickySidebar" style="padding-top: 0px; padding-bottom: 1px; position: static; transform: none;">
                <div class="card border-white">
                    <div class="card-header">
                        <div class="d-flex align-items-center flex-wrap row-gap-3">                                                 
                            <div class="d-flex align-items-center justify-content-center avatar avatar-xxl border border-dashed me-2 flex-shrink-0 text-dark frames">
                                <img src="../assets/img/students/student-01.jpg"  class="img-fluid" alt="img">
                            </div>                                              
                            <div class="overflow-hidden">
                                <span class="badge badge-soft-success d-inline-flex align-items-center mb-1"><i class="ti ti-circle-filled fs-5 me-1"></i><%= studentInfo.is_active ? 'Active' : 'Inactive' %></span>
                                <h5 class="mb-1 text-truncate"><%= studentInfo.nom + " "  + studentInfo.prenom %></h5>
                            </div>
                        </div>
                    </div>

                    <!-- Basic Information -->
                    <div class="card-body">
                        <h5 class="mb-3">Basic Information</h5>
                        <dl class="row mb-0"> 
                            <dt class="col-6 fw-medium text-dark mb-3">Gender</dt> 
                            <dd class="col-6 mb-3"><%= studentInfo.gender %></dd> 
                            <dt class="col-6 fw-medium text-dark mb-3">Date Of Birth</dt> 
                            <dd class="col-6 mb-3"><%= studentInfo.date_naissance %></dd>
                        </dl>
                    </div>
                    <!-- /Basic Information -->

                </div>
                <div class="card border-white">
                    <div class="card-body">
                        <h5 class="mb-3">Primary Contact Info</h5>
                        <div class="d-flex align-items-center mb-3">
                            <span class="avatar avatar-md bg-light-300 rounded me-2 flex-shrink-0 text-default"><i class="ti ti-phone"></i></span>
                            <div>
                                <span class="text-dark fw-medium mb-1">Phone Number</span>
                                <p><%= studentInfo.telephone %></p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="avatar avatar-md bg-light-300 rounded me-2 flex-shrink-0 text-default"><i class="ti ti-mail"></i></span>
                            <div>
                                <span class="text-dark fw-medium mb-1">Email Address</span>
                                <p><%= studentInfo.email %></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-sensor" style="position: absolute; inset: 0px; overflow: hidden; z-index: -1; visibility: hidden;"><div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0px; top: 0px; transition: all; width: 533px; height: 1234px;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div></div></div></div>
        <!-- /Student Information -->

        <div class="col-xxl-9 col-xl-8">
            <div class="row">
                <div class="col-md-12">

                    <!-- List -->
                    <ul class="nav nav-tabs nav-tabs-bottom mb-4">
                        <li>
                            <a href="student-details" class="nav-link <%= student_page_path === 'student-details-tab' ? 'active' : '' %>"><i class="ti ti-school me-2"></i>Student Details</a>
                        </li>
                        <li>
                            <a href="student-time-table" class="nav-link <%= student_page_path === 'student-time-table-tab' ? 'active' : '' %>"><i class="ti ti-table-options me-2"></i>Time Table</a>
                        </li>
                        <li>
                            <a href="student-attendance" class="nav-link <%= student_page_path === 'student-attendance-tab' ? 'active' : '' %>"><i class="ti ti-calendar-due me-2"></i>Leave &amp; Attendance</a>
                        </li>
                        <li>
                            <a href="student-exam-results" class="nav-link <%= student_page_path === 'student-exam-results-tab' ? 'active' : '' %>"><i class="ti ti-bookmark-edit me-2"></i>Exam &amp; Results</a>
                        </li>
                    </ul>
                    <!-- /List -->

                    <%- include('./' + student_page_path) %>
            </div>
        </div>

    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
    const studentLink = document.querySelector(".student-link");
    const studentId = studentLink?.getAttribute("data-id");

    const tabs = document.querySelectorAll(".nav-link");

    tabs.forEach(tab => {
        tab.addEventListener("click", function (event) {
            event.preventDefault(); // Prevent default link navigation

            const baseUrl = this.getAttribute("href");

            const newUrl = `${baseUrl}?studentId=${studentId}`;

            window.location.href = newUrl;
        });
    });
});

</script>